---
title: CLI
description: Command-line tools for code generation, validation, and migrations
---

import { Callout } from 'fumadocs-ui/components/callout'

<Callout type="info" title="Built for AI Agents">
  Corsair CLI is designed to work with AI coding agents like Claude Code and Cursor.
</Callout>

## Available Commands

### Watch Mode

Start the interactive development UI with watch mode:

```bash
pnpm corsair watch
```

This starts an interactive UI that watches for schema changes and automatically
validates your queries and mutations. It provides real-time feedback on type safety
and schema compatibility.

### Generate

Generate types and validate your Corsair configuration:

```bash
pnpm corsair generate
```

This command generates TypeScript types for your queries and mutations based on
your schema and validates that all operations are properly typed.

### Check

Validate your queries and mutations without generating files:

```bash
pnpm corsair check
```

Runs validation checks on your Corsair operations to ensure they're correctly
structured and type-safe. Useful in CI/CD pipelines.

### Fix

Automatically fix common issues in your Corsair code:

```bash
pnpm corsair fix
```

Attempts to automatically fix common issues like missing exports, incorrect
imports, or simple type errors.

### Migrate

Run database migrations (integrates with your ORM's migration tool):

```bash
pnpm corsair migrate
```

For Drizzle projects, this runs `drizzle-kit push` to sync your
schema with your database.

## AI Agent Commands

Corsair has specialized commands designed for AI coding agents to generate
queries and mutations:

### Query Generation

```bash
pnpm corsair query -n "get all albums by artist id" -i "return all albums in descending order (recent ones first)"
```

### Mutation Generation

```bash
pnpm corsair mutation -n "create album" -i "create a new album with validation"
```

<Callout type="info" title="Natural Language">
  These commands accept natural language descriptions and generate type-safe
  TypeScript code that matches your schema.
</Callout>

## Configuration

The CLI reads from your `corsair.config.ts` file. Make sure it's
properly configured before running CLI commands:

```ts title="corsair.config.ts"
import { type CorsairConfig } from 'corsair'
import { db } from './db'

export const config = {
  dbType: 'postgres',
  orm: 'drizzle',
  framework: 'nextjs',
  pathToCorsairFolder: './corsair',
  apiEndpoint: process.env.NEXT_PUBLIC_CORSAIR_API_ROUTE!,
  db: db,
  schema: db._.schema,
  connection: process.env.DATABASE_URL!,
} satisfies CorsairConfig<typeof db>
```

## CI/CD Integration

Add Corsair checks to your CI pipeline:

```yaml title=".github/workflows/ci.yml"
name: CI
on: [push, pull_request]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install
      - run: npm run corsair check
      - run: npm run typecheck
```

<Callout type="warn" title="Schema-Aware Validation">
  When your database schema changes, Corsair will detect affected queries and
  mutations during the check command, preventing runtime errors.
</Callout>

